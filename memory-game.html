<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">
    <title>DS Sustainability</title>

</head>

<body class="color-bg">
    <header>
        <div class="header-top-bar">
            <a href="index.html" class="logo">
                <img src="assets/img/petronas-logo.svg" alt="Petronas logo">
            </a>
            <div></div>
            <div>
                <img src="assets/img/memory-match-icon.svg" class="w-100" alt="">
            </div>
        </div>

    </header>
    <main>
        <div class="container">
            <div class="row">
                <div class="col-xxl-9 mx-auto px-0">
                    <div class="game-container">
                        <div class="game-time">
                            02:59
                        </div>
                        <div class="memory-game">
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="love-earth">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/love-earth.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="green-factory">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/green-factory.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="lesscarbon">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/lesscarbon.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="switch-to-LED">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/switch-to-LED.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="lesscarbon">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/lesscarbon.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="ride-bicycle">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/ride-bicycle.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="compost">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/compost.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="social">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/social.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="social">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/social.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="adjusting">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/adjusting.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="recycle">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/recycle.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="adjusting">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/adjusting.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="electric-car">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/electric-car.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="earth-energy">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/earth-energy.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="recycle-water">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/recycle-water.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="green-energy">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/green-energy.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="wind-turbine">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/wind-turbine.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="electric-fuel">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/electric-fuel.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="save-water">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/save-water.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="switch-to-LED">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/switch-to-LED.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="wind-turbine">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/wind-turbine.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="compost">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/compost.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="ride-bicycle">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/ride-bicycle.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="green-factory">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/green-factory.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="recycle">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/recycle.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="solar-power">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/solar-power.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="electric-fuel">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/electric-fuel.svg" alt="React">
                                    </div>
                                </div>
                            </div>
                            <div class="memory-card">
                                <div class="memory-card-inner" data-product="hydro-power">
                                    <div class="front-face">
                                        <img src="assets/img/memory-images/memory-icon.svg" alt="Memory Card">
                                    </div>
                                    <div class="back-face">
                                        <img src="assets/img/memory-images/hydro-power.svg" alt="React">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <div class="text-center">
                <img src="assets/img/sustainability-text.svg" class="mb-4 w-75" alt="">
                <!-- <h3 class="footer-line">Passionate about Progress</h3> -->
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA3E8YOuJONoWtX1UZE_SC86RJDDVWBUNc",
            authDomain: "ds-sustainiblity.firebaseapp.com",
            projectId: "ds-sustainiblity",
            storageBucket: "ds-sustainiblity.appspot.com",
            messagingSenderId: "37104828237",
            appId: "1:37104828237:web:3f2d6c2b9857bfb058c104"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = firebase.database();
        const timerElement = document.getElementById('timer');
        let countdownDuration = 3 * 60 * 1000; // 3 minutes in milliseconds
        let startTime = null;

        // Start the countdown
        function startCountdown() {
            startTime = new Date().getTime();
            database.ref('timer/startTime').set(startTime);

            updateTimer();
        }

        // Update the countdown every second
        function updateTimer() {
            database.ref('timer/startTime').on('value', (snapshot) => {
                startTime = snapshot.val();

                const now = new Date().getTime();
                const distance = countdownDuration - (now - startTime);

                if (distance < 0) {
                    timerElement.innerHTML = "00:00";
                } else {
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    timerElement.innerHTML = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            });

            setTimeout(updateTimer, 1000);
        }

        // Call this function when you want to start the countdown
        startCountdown();
    </script>
    <script>
        const cards = document.querySelectorAll('.memory-card-inner');
        const cardsOuter = document.querySelectorAll('.memory-card');
        let gameTime = document.querySelector(".game-time")
        let countdownTime = 35;
        let seen = false
        function startCountdown() {

            const countdownInterval = setInterval(() => {
                let minutes = Math.floor(countdownTime / 60);
                let seconds = countdownTime % 60;

                seconds = seconds < 10 ? '0' + seconds : seconds;

                gameTime.textContent = `${minutes}:${seconds}`;

                countdownTime--;

                if (countdownTime < 0) {
                    if (!seen) {
                        countdownTime = 120
                        startCountdown()
                        cards.forEach(card => {
                            card.classList.remove("flip")
                            card.style.pointerEvents = "auto"
                        });
                        seen = true
                    }
                    else {
                        clearInterval(countdownInterval);
                        gameTime.textContent = "Time's up!";
                    }

                }
            }, 1000);
        }

        window.onload = startCountdown;



        cards.forEach(card => {
            card.classList.add("flip")
            card.style.pointerEvents = "none"
        });

        let gameEnd = false
        let score = 0
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;
            this.classList.add('flip');

            if (!hasFlippedCard) {
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            secondCard = this;

            checkForMatch();
        }


        function checkForMatch() {
            let isMatch = firstCard.dataset.product === secondCard.dataset.product;
            isMatch ? disableCards() : unflipCards();
            isMatch ? score++ : null;
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            resetBoard();
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('flip');
                secondCard.classList.remove('flip');
                resetBoard();
            }, 500);
        }
        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        (function shuffle() {
            cardsOuter.forEach(cardout => {
                let ramdomPos = Math.floor(Math.random() * 12);
                cardout.style.order = ramdomPos;
            });
        })();

        cards.forEach(card => card.addEventListener('click', flipCard));


    </script>
</body>

</html>